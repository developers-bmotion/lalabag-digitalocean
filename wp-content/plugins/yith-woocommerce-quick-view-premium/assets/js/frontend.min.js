jQuery(document).ready(function(d){"use strict";if("undefined"!=typeof yith_qv){var t="",r="yith-inline"!=yith_qv.type?d(document).find(".yith-quick-view"):d(document).find(".yith-quick-view").clone(),s=r.find(".yith-quick-view-content"),_=r.find(".yith-quick-view-close"),c=r.find(".yith-quick-view-nav"),l=[],h=null,f=null,i=function(){if("yith-inline"!=yith_qv.type){var t=d(document).find(".yith-quick-view .yith-wcqv-wrapper"),i=d(window).width(),e=d(window).height(),a=i-60>yith_qv.popup_size_width?yith_qv.popup_size_width:i-60,n=e-120>yith_qv.popup_size_height?yith_qv.popup_size_height:e-120;t.css({left:i/2-a/2,top:e/2-n/2,width:a+"px",height:n+"px"})}};if("undefined"!=typeof yith_qv){d.fn.yith_wcqv_init=function(){t=d(document).find(".yith-wcqv-button"),d.each(t,function(){var t=d(this).data("product_id");-1==d.inArray(t,l)&&l.push(t)}),c.length&&a(c),n(_),i(),t.off("click"),imagesLoaded(s,function(){e(t)}),d(document).on("click",".yith-wcqv-button",function(t){var i=d(this),e=(i.data("type"),i.data("product_id"));if(e){if(t.preventDefault(),t.stopPropagation(),yith_qv.enable_loading||o(i),"yith-inline"==yith_qv.type){var a=i.closest(yith_qv.main_product),n=a.hasClass("last")?a:a.nextUntil(".first",".last");if(n.length&&n.hasClass("last")||(n=a.parent().find(yith_qv.main_product).last()),a.closest(".yith-quick-view").length||n.next(".yith-quick-view").length)o(s);else{if(r.hasClass("open"))return r.removeClass("open").removeClass("loading"),void r.slideUp("slow",function(){n.after(r),u(i,e)});n.after(r)}}else d(document).trigger("qv_loading"),d(document).trigger("yith_quick_view_loading");u(i,e)}})};var e=function(t){t.length&&!t.hasClass("inside-thumb")||d.each(t,function(){var t=d(this),i=t.closest(yith_qv.main_product).find(yith_qv.main_image_class);t.css({top:(i.height()-t.height())/2+"px",right:(i.width()-t.width())/2+"px",display:"inline-block"})})},o=function(t){"undefined"!=typeof yith_qv.loader&&(t.block({message:null,overlayCSS:{background:"#fff url("+yith_qv.loader+") no-repeat center",opacity:.5,cursor:"none"}}),d(document).on("qv_loader_stop",function(){t.unblock()}))},a=function(t){var i=t.find("> a");i.off("click"),i.on("click",function(t){t.preventDefault();var i=d(this),e=i.data("product_id");o(s),u(i,e)})},u=function(t,i){var e=d.inArray(i,l),a=l[e-1],n=l[e+1],o={action:yith_qv.ajaxQuickView,product_id:i,prev_product_id:a,next_product_id:n,context:"frontend",lang:yith_qv.lang};null!=f&&f.abort(),f=d.ajax({url:yith_qv.ajaxurl.toString().replace("%%endpoint%%",yith_qv.ajaxQuickView),data:o,dataType:"json",type:"GET",success:function(t){s.html(t.html),"slider"==yith_qv.imagesMode&&imagesLoaded(s,function(){v()}),480<d(window).width()&&s.find("div.summary").perfectScrollbar({suppressScrollX:!0}),yith_qv.increment_plugin&&s.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />');var i=s.find(".variations_form");i.each(function(){d(this).wc_variation_form(),"undefined"!=typeof d.fn.yith_wccl?d(this).yith_wccl():"undefined"!=typeof d.yith_wccl&&t.prod_attr&&d.yith_wccl(t.prod_attr)}),i.trigger("check_variations"),i.trigger("reset_image"),"undefined"!=typeof d.fn.yith_ywraq_variations&&(d.fn.yith_ywraq_variations(),s.find('[name|="variation_id"]').trigger("change"));var e=s.find(".yith-wocc-wrapper");e.length&&"undefined"!=typeof d.fn.yith_wocc_init&&e.yith_wocc_init(),"undefined"!=typeof d.fn.init_addon_totals?s.find(".cart:not(.cart_group)").each(function(){d(this).init_addon_totals()}):"undefined"!=typeof woocommerce_addons_params&&d("body").trigger("quick-view-displayed"),"undefined"!=typeof d.fn.prettyPhoto&&s.find("a[data-rel^='prettyPhoto']").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1,show_title:!1}),yith_qv.ajaxcart&&m(t.product_link,s);var a=i.find(".single_variation_wrap");if(y(a),"undefined"!=typeof d.fn.ajaxForm&&"undefined"!=typeof d.fn.wpcf7InitForm&&(d.fn.ajaxForm({delegation:!0,target:"#output"}),s.find("div.wpcf7 > form").wpcf7InitForm()),c.length){var n=c.find(".yith-wcqv-next"),o=c.find(".yith-wcqv-prev");t.prev_product?(o.find("div").html(t.prev_product_preview),o.data("product_id",t.prev_product).css({display:"block"})):o.css({display:"none"}),t.next_product?(n.find("div").html(t.next_product_preview),n.data("product_id",t.next_product).css({display:"block"})):n.css({display:"none"})}r.hasClass("open")||(r.removeClass("loading").addClass("open"),"yith-inline"==yith_qv.type?r.slideDown("slow"):d("html").addClass("yith-quick-view-is-open")),f=null,d(document).trigger("qv_loader_stop"),d(document).trigger("yith_quick_view_loaded")}})},v=function(){var t=s.find(".yith-quick-view-images-slider");t.length&&"undefined"!=typeof d.fn.bxSlider&&(h=t.bxSlider({pager:yith_qv.enable_images_slider_pagination,prevText:"",nextText:""}))};d(document).on("click",".yith-quick-view-single-thumb",function(){d(this).siblings().removeClass("active");var t=d(this).parents(".images"),i=t.find(".woocommerce-main-image"),e=t.find("img.wp-post-image"),a=d(this).data("img"),n=d(this).data("href");e.length||(i=(e=t.find("img.attachment-quick_view_image_size")).closest("a")),e.attr("src",a).attr("srcset",a).attr("src-orig",a),i.attr("href",n),d(this).addClass("active"),d(document).trigger("yith_wcqv_change_thumb")});var n=function(t){t.off("click"),t.on("click",function(t){t.preventDefault(),i()}),"yith-inline"!=yith_qv.type&&(d(document).keyup(function(t){27===t.keyCode&&i()}),d(".yith-quick-view-overlay").on("click",function(t){r.hasClass("loading")||i()}));var i=function(){r.removeClass("open").removeClass("loading"),"yith-inline"!=yith_qv.type?(d("html").removeClass("yith-quick-view-is-open"),setTimeout(function(){e()},1e3)):r.slideUp("slow",function(){if("scroll-up"==yith_qv.closing_cascading){var t=d(".yith-quick-view.yith-inline").prev().offset().top;d("html,body").animate({scrollTop:t-100},1e3)}e()})},e=function(){s.html(""),d(document).trigger("qv_is_closed")}};d(document).on("yith_infs_adding_elem yith-wcan-ajax-filtered",function(){d.fn.yith_wcqv_init()});var m=function(r,c){c.find("form.cart").on("submit",function(t){var i,e=d(this),a=e.find("button");if(!("is_one_click"==e.find('input[name="_yith_wocc_one_click"]').val())){t.preventDefault();var n=new FormData;d.each(e.find("input[type='file']"),function(t,e){d.each(d(e)[0].files,function(t,i){n.append(e.name,i)})});var o=!1;i=e.serializeArray(),d.each(i,function(t,i){"add-to-cart"==i.name&&(o=!0),n.append(i.name,i.value)}),n.append("wp_http_referer",r),o||n.append("add-to-cart",a.val()),n.append("context","frontend"),n.append("action",yith_qv.ajaxAddToCart),"undefined"!=typeof yith_qv.loader&&a.block({message:null,overlayCSS:{background:"#fff url("+yith_qv.loader+") no-repeat center",opacity:.5,cursor:"none"}}),d.ajax({url:r,data:n,contentType:!1,processData:!1,type:"POST",dataType:"json",success:function(t){if(yith_qv.redirect_checkout)window.location.href=yith_qv.checkout_url;else{var i="undefined"!=typeof t.fragments.ywcqv_messages?t.fragments.ywcqv_messages:"",e=c.find("div.summary");e.find(".woocommerce-message, .woocommerce-error").remove(),i.length&&e.prepend(i),"undefined"!=typeof yith_qv.loader&&a.unblock(),yith_qv.ismobile?s.scrollTop(e.position().top):e.scrollTop(0),d(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,a]),yith_qv.closeOnAjaxCart&&"undefined"==typeof t.fragments.ywcqv_error&&setTimeout(function(){_.click()},yith_qv.timeout_close_quick_view)}}})}})},y=function(t){var c=[],e=function(t){var i=s.find("div.images"),e=i.find(".yith-quick-view-thumbs"),a=i.find(".attachment-quick_view_image_size").first(),n=i.find("a.woocommerce-main-image"),o=e.find('.yith-quick-view-single-thumb[data-attachment_id="'+t.attachment_id+'"]'),r=d.inArray(t.attachment_id,c);o.length?o.click():-1!==r&&null!==h?h.goToSlide(r):t.image&&t.image.src&&1<t.image.src.length&&(a.wc_set_variation_attr("src",t.image.src),a.wc_set_variation_attr("height",t.image.src_h),a.wc_set_variation_attr("width",t.image.src_w),a.wc_set_variation_attr("srcset",t.image.srcset),a.wc_set_variation_attr("sizes",t.image.sizes),a.wc_set_variation_attr("title",t.image.title),a.wc_set_variation_attr("alt",t.image.alt),a.wc_set_variation_attr("data-src",t.image.full_src),a.wc_set_variation_attr("data-large_image",t.image.full_src),a.wc_set_variation_attr("data-large_image_width",t.image.full_src_w),a.wc_set_variation_attr("data-large_image_height",t.image.full_src_h),n.wc_set_variation_attr("href",t.image.full_src),e.find(".yith-quick-view-single-thumb").removeClass("active"))},n=function(i){return!(!yith_qv.ajaxVariationGallery||"none"==yith_qv.imagesMode||!i.has_custom_gallery&&!s.find("div.images").hasClass("has_custom_gallery"))&&(null!=f&&f.abort(),f=d.ajax({url:yith_qv.ajaxurl.toString().replace("%%endpoint%%",yith_qv.ajaxVariationGallery),data:{action:yith_qv.ajaxVariationGallery,id:i?i.variation_id:d("input#yith_wcqv_product_id").val(),context:"frontend"},dataType:"json",type:"POST",beforeSend:function(){s.find("div.images").addClass("loading-gallery")},success:function(t){s.find("div.images").replaceWith(t.html),"slider"==yith_qv.imagesMode&&(c=[],v()),i&&e(i),"undefined"!=typeof d.fn.prettyPhoto&&s.find("a[data-rel^='prettyPhoto']").prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1,show_title:!1}),f=null,t["default"]||s.find("div.images").addClass("has_custom_gallery"),d(document).trigger("qv_variation_gallery_loaded")}}),!0)};d(".yith-quick-view-images-slider").find(".yith-quick-view-slide").each(function(t,i){c[t]=d(this).data("attachment_id")+""}),t.on("show_variation",function(t,i){"undefined"==typeof i.attachment_id||n(i)||e(i)}),t.on("hide_variation",function(){var t,i,e,a;n(!1)||(t=s.find("div.images"),i=t.find(".yith-quick-view-thumbs"),e=t.find(".attachment-quick_view_image_size").first(),a=t.find("a.woocommerce-main-image"),e.wc_reset_variation_attr("src"),e.wc_reset_variation_attr("width"),e.wc_reset_variation_attr("height"),e.wc_reset_variation_attr("srcset"),e.wc_reset_variation_attr("sizes"),e.wc_reset_variation_attr("title"),e.wc_reset_variation_attr("alt"),e.wc_reset_variation_attr("data-src"),e.wc_reset_variation_attr("data-large_image"),e.wc_reset_variation_attr("data-large_image_width"),e.wc_reset_variation_attr("data-large_image_height"),a.wc_reset_variation_attr("href"),i.find(".yith-quick-view-single-thumb").first().click(),null!==h&&h.goToSlide(0))})};d(document).on("qv_loading",function(){if(!yith_qv.enable_loading)return!1;var t=d(document).find(".yith-quick-view"),i=t.find(".yith-quick-view-overlay");if(t.hasClass("loading")||t.addClass("loading"),!i.find("p").length){var e=d("<p />").text(yith_qv.loading_text);i.append(e)}}),yith_qv.enable_zoom&&"undefined"!=typeof d.fn.yith_magnifier&&d(document).on("qv_loader_stop qv_variation_gallery_loaded",function(t){if("undefined"==typeof yith_magnifier_options)return!1;var a=d(".yith-quick-view-content .images"),n=a.find(".yith_magnifier_zoom"),o=a.find(".yith_magnifier_zoom img.attachment-quick_view_image_size"),i=a.find(".yith_magnifier_zoom").attr("href"),e=a.find(".yith_magnifier_zoom img").attr("src");a.data("yith_magnifier")&&a.yith_magnifier("destroy"),n.attr("href",i),o.attr("src",e),o.attr("srcset",e),o.attr("src-orig",e);var r={enableSlider:!1,position:"inside",elements:{zoom:n,zoomImage:o}};r=d.extend(!0,{},yith_magnifier_options,r),a.find("a.pp_expand, a.yith_expand").remove(),a.yith_magnifier(r),d(document).off("yith_wcqv_change_thumb").on("yith_wcqv_change_thumb",function(){a.data("yith_magnifier")&&a.yith_magnifier("destroy"),a.yith_magnifier(r)}),d(document).on("found_variation","form.variations_form",function(t,i){var e=!1;if(i.image_src&&i.image_src.length?e=i.image_src:i.image.src&&(e=i.image.src),!e)return!1;n.attr("href",e),o.attr("src",e),o.attr("srcset",e),o.attr("src-orig",e),a.data("yith_magnifier")&&a.yith_magnifier("destroy"),a.yith_magnifier(r)}).on("reset_image",function(t){n.attr("href",i),o.attr("src",e),o.attr("srcset",e),o.attr("src-orig",e),a.data("yith_magnifier")&&a.yith_magnifier("destroy"),a.yith_magnifier(r)})}),d(document).on("qv_loader_stop",function(){"yith-inline"==yith_qv.type&&d("html, body").animate({scrollTop:d(".yith-quick-view").offset().top-100},1e3)}),d.fn.YitdoubleTapToGo=function(){return this.each(function(){var i=!1,e=d(this).closest(".product");d(document).on("qv_loader_stop",function(){e.removeClass("hover_mobile")}),d(this).on("touchstart",function(t){e.siblings().removeClass("hover_mobile"),i&&e.hasClass("hover_mobile")||(t.preventDefault(),e.addClass("hover_mobile"),i=!0)})}),this},yith_qv.ismobile&&yith_qv.enable_double_tab&&d(yith_qv.main_product_link).YitdoubleTapToGo(),d.fn.yith_wcqv_init(),d(document).on("yith_wcqv_wcajaxnav_update post-load",d.fn.yith_wcqv_init),d(window).on("resize",function(){i(),e(d(document).find(".yith-wcqv-button"))}),d(document).on("facetwp-loaded",function(){e(d(document).find(".yith-wcqv-button"))}),d(document).on("qv_loader_stop",function(){"undefined"!=typeof d.fn.tawcvs_variation_swatches_form&&(d(".variations_form").tawcvs_variation_swatches_form(),d(document.body).trigger("tawcvs_initialized"))})}}});